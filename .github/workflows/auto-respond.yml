name: Auto-Respond to PRs
on:
  pull_request:
    types: [opened]
  workflow_dispatch:  # Allows manual execution

jobs:
  respond:
    runs-on: ubuntu-latest
    steps:
      - name: Debug Event Payload
        run: echo '${{ toJson(github.event) }}'  # Logs event data for debugging

      - name: Comment on new PRs with Exam Notice
        uses: actions/github-script@v7
        with:
          script: |
            const pr = context.payload.pull_request;
            if (!pr) {
              console.log("Manually triggered. No PR context.");
              return;
            }

            const prNumber = pr.number;
            const today = new Date();
            const returnDate = new Date("2025-03-10");
            const diffDays = Math.ceil((returnDate - today) / (1000 * 60 * 60 * 24));

            const commentBody = `
            ğŸš€ **Thanks for your PR!**  

            ğŸ“ I'm currently preparing for exams and won't be able to review pull requests until **March 10, 2025**.  

            ğŸ“… **Today's Date:** ${today.toDateString()}  
            â³ **Time Until Review Resumes:** ${diffDays} days left!  

            ğŸ“ Your PR has been added to the review queue, and I'll get to it once I'm back. Thank you for your patience! ğŸ™Œ
            `;

            github.rest.issues.createComment({
              issue_number: prNumber,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: commentBody
            });
